<h1 class="font-semibold text-2xl mb-12">
    Plats et ingrédients
</h1>

<div class="flex items-center justify-center space-x-4 mb-8">
    <button class="bg-blue-500 text-white px-2 py-1 rounded" (click)="newDish()">Ajouter un plat</button>
    <button class="bg-blue-500 text-white px-2 py-1 rounded" (click)="addIngredient()">Ajouter un ingrédient</button>
</div>

@if (data$ | async; as data) {

@if (data.dishes.length > 0 || data.ingredients.length > 0) {
<div class="flex mb-4 space-x-4">
    <label class="inline-flex items-center">
        <input type="checkbox" (change)="toggleCategory('viande', $event)" class="text-blue-500">
        <span class="ml-2">Viande</span>
    </label>
    <label class="inline-flex items-center">
        <input type="checkbox" (change)="toggleCategory('vegetarien', $event)" class="text-blue-500">
        <span class="ml-2">Végétarien</span>
    </label>
    <label class="inline-flex items-center">
        <input type="checkbox" (change)="toggleCategory('accompagnements', $event)" class="text-blue-500">
        <span class="ml-2">Accompagnements</span>
    </label>
    <label class="inline-flex items-center">
        <input type="checkbox" (change)="toggleCategory('desserts', $event)" class="text-blue-500">
        <span class="ml-2">Desserts</span>
    </label>
</div>


<div class="overflow-y-auto">

    <!-- Dishes -->
    @for (dish of data.dishes; track $index) {
    <div class="p-2 border-b border-gray-200 flex items-center cursor-pointer hover:bg-indigo-50 hover:text-indigo-500"
        (click)="openDish(dish)">
        <div>
            <h2 class="text-xl font-semibold">{{ dish.name }}</h2>
            <p class="text-sm italic text-gray-600">{{ dish.getIngredients() }}</p>
        </div>

        <button class="bg-red-500 text-white px-2 py-1 rounded ml-auto" (click)="deleteDish(dish, $event)"><i
                class="fas fa-trash-alt"></i></button>

    </div>
    }
    <!-- Ingredients -->
    @for (ing of data.ingredients; track $index) {
    <div class="p-2 border-b border-gray-200 flex items-center cursor-pointer hover:bg-indigo-50 hover:text-indigo-500">
        <div>
            <h3 class="text-lg">{{ ing.name }}</h3>
        </div>

        <button class="bg-red-500 text-white px-2 py-1 rounded ml-auto" (click)="deleteIngredient(ing, $event)"><i
                class="fas fa-trash-alt"></i></button>

    </div>

    }
</div>
} @else {
<p class="italic text-center">Il n'y a pas encore de repas !</p>
}
}